<!--
  templateType: page
  isAvailableForNewContent: false
  label: Macros
-->

{%- macro classes(settings) -%}
  {{-
    [settings.pt_mobile,
    settings.pt_desktop,
    settings.pr_mobile,
    settings.pr_desktop,
    settings.pb_mobile,
    settings.pb_desktop,
    settings.pl_mobile,
    settings.pl_desktop,
    settings.bg_color,
    settings.text_color,
    settings.gap,
    settings.justify,
    settings.align
    ]|join(' ')
  -}}
{%- endmacro -%}

{%- macro render_event_card(event, is_carousel_slide) -%}
  {% set is_carousel_slide = is_carousel_slide ? 'embla__slide min-w-[100%] basis-[100%] md:min-w-[50%] md:basis-[50%] xl:min-w-[30%] xl:basis-[30%] max-w-[32rem]' : 'w-full' %}
  {% set current_time = local_dt|unixtimestamp %}
  <div
    class="border-border {{ is_carousel_slide }} flex flex-col self-stretch overflow-hidden rounded-2xl border bg-white shadow-sm transition-all duration-200">
    <div class="bg-prussian-blue p-md relative flex min-h-[12rem] flex-col justify-end overflow-hidden text-white">
      <img
        src="{{ event.image.url }}"
        alt="{{ event.image.alt }}"
        class="absolute top-0 left-0 h-full w-full object-cover transition-all duration-200 group-hover:scale-105" />

      {% if event.date_start > current_time %}
        <div class="absolute -top-2 right-4 items-center justify-center text-black">
          <div class="relative h-[9rem] w-[7.5rem]">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 141 164" fill="none" class="absolute top-0">
              <path d="M0.804688 0H140.195V163.316L70.5001 128.114L0.804688 163.316V0Z" fill="#013a55"></path>
            </svg>

            <div class="pt-md absolute left-0 flex h-full w-full flex-col items-center">
              <div class="font-sans-narrow text-center text-4xl leading-none font-bold text-white">
                {{ event.date_start|datetimeformat("%e") }}
              </div>
              <div class="font-sans-narrow text-xl font-medium text-white">
                {{ event.date_start|datetimeformat("%b, %y") }}
              </div>
            </div>
          </div>
        </div>
      {% endif %}
    </div>
    <div class="p-md my-auto flex flex-col justify-between pb-0">
      <div class="gap-sm flex h-full flex-col justify-center">
        {% if event.date_start > current_time %}
          <p class="text-imperial-red font-semibold">{{ event.time }}</p>
        {% endif %}
        <div class="flex items-center">
          <h5 class="break-word font-sans-narrow font-semibold">{{ event.name }}</h5>
        </div>
        <p class="text-nickel font-semibold">{{ event.location }}</p>
      </div>
    </div>
    <div class="p-md w-full">
      <a
        target="_blank"
        class="button with-arrow bg-imperial-red block w-full! rounded-lg px-4 py-3 text-center font-medium text-white transition-colors duration-200 hover:bg-red-700"
        href="{{ event.hs_path ? '/events/' ~ event.hs_path : event.cta_url }}">
        {{ module.cta_label || 'View Details' }}
      </a>
    </div>
  </div>
{%- endmacro -%}

{% macro render_carousel_buttons() %}
  <div class="gap-sm align-center my-auto flex h-full items-center md:justify-center">
    <button
      aria-label="Previous slide"
      class="group plain bg-imperial-red embla__prev disabled:border-nickel! border-imperial-red flex h-[2.5rem] w-[2.5rem] items-center justify-center rounded-full! border disabled:bg-white">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="19.44285"
        height="33.583141"
        viewBox="0.76305 0.693359 19.44285 33.583141"
        fill="none"
        class="h-5">
        <path
          d="M17.4663 0.693359L20.2059 3.43304L6.15403 17.4849L20.2059 31.5368L17.4663 34.2765L0.76305 17.4849L17.4663 0.693359Z"
          class="group-disabled:fill-nickel fill-white" />
      </svg>
    </button>
    <button
      class="group plain bg-imperial-red embla__next disabled:border-nickel! border-imperial-red flex h-[2.5rem] w-[2.5rem] items-center justify-center rounded-full! border disabled:bg-white"
      aria-label="Next slide">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="19.442855"
        height="33.583141"
        viewBox="0.793945 0.693359 19.442855 33.583141"
        fill="none"
        class="h-5">
        <path
          d="M3.53362 0.693359L0.793945 3.43304L14.8458 17.4849L0.793945 31.5368L3.53362 34.2765L20.2368 17.4849L3.53362 0.693359Z"
          class="group-disabled:fill-nickel fill-white" />
      </svg>
    </button>
  </div>
{% endmacro %}

{%- macro breadcrumbs(breadcrumbs) -%}
  <div class="mt-header-height"></div>

  {%- if breadcrumbs|length > 0 -%}
    <div class="gap-base max-w-max-page p-md md:pl-2xl md:pr-2xl m-auto flex items-center">
      {%- for breadcrumb in breadcrumbs %}

        {% if !loop.last %}
          <a href="{{ breadcrumb.url.href }}" class="text-nickel break-word cursor-pointer text-lg">
            {{ breadcrumb.title }}
          </a>
          <div class="text-nickel max-h-[1.1875rem] max-w-[0.675rem]">
            <svg
              class="max-h-inherit max-w-inherit"
              xmlns="http://www.w3.org/2000/svg"
              width="100%"
              height="100%"
              viewBox="0 0 11 19"
              fill="none">
              <path d="M1.55 0L0 1.55L7.95 9.5L0 17.45L1.55 19L11 9.5L1.55 0Z" fill="currentColor" />
            </svg>
          </div>
        {% endif %}

        {% if loop.last %}
          <span class="text-default break-word text-lg font-bold">{{ breadcrumb.title }}</span>
        {% endif %}
      {%- endfor -%}
    </div>
  {%- endif -%}
{%- endmacro -%}

{%- macro auth_wrapper() -%}
  <div class="max-w-max-page relative m-auto flex min-h-[100vh] flex-col-reverse lg:flex-row">
    <img
      src="https://145184808.fs1.hubspotusercontent-eu1.net/hubfs/145184808/image%202.png"
      class="top-sm right-sm absolute max-h-[5rem] lg:max-h-[7rem]" />
    <div class="px-md md:px-2xl relative flex w-full flex-col items-center justify-between text-white lg:max-w-[38rem]">
      <img
        src="https://145184808.fs1.hubspotusercontent-eu1.net/hubfs/145184808/761c5869ba5f1c0356006068cdb3adcfe5d37865%20(2).jpg"
        class="absolute top-0 left-0 h-full w-full object-cover" />
      <div class="absolute top-0 left-0 h-full w-full bg-[#013B57E3]"></div>
      <div class="pt-md md:pt-2xl lg:pt-3xl gap-sm relative flex w-full flex-col">
        <p class="text-thin text-lg tracking-widest">CONNECTING SCIENCE WITH CARE</p>
        <h2 class="leading-12 font-semibold">
          At Tosoh, we enable precision and reliability for better patient outcomes.
        </h2>
      </div>
      <img
        src="https://145184808.fs1.hubspotusercontent-eu1.net/hubfs/145184808/close-up-portrait-focused-young-male-doctor%202.png"
        class="relative max-h-[16rem] object-contain lg:max-h-[36rem]" />
    </div>
    <div class="p-md flex w-full items-center">
      <div class="systems-page m-auto w-full">{{ caller() }}</div>
    </div>
  </div>
{%- endmacro -%}

{%- macro tab_actions_selector(tab_group_columns) -%}
  {% require_js position="head" %}
    <script>
      function handleTabGroupChange(event) {
        const tabGroup = event.target.value;
        const tabGroupElement = document.querySelector(`tosoh-tab-group[groupId="${tabGroup}"]`);

        console.log(tabGroupElement);

        window.dispatchEvent(new CustomEvent('TosohTabGroupActive', { detail: { groupId: tabGroup }, bubbles: true }));
      }
    </script>
  {% end_require_js %}

  <div class="hidden w-full md:block">
    <tosoh-scroll-x>
      <div class="mb-xs min-w-9xl mx-auto flex w-full justify-center">
        {% for tab_group_column in tab_group_columns %}
          <tosoh-tab-group
            variant="action"
            groupId="{{ tab_group_column.column_label }}"
            {{ loop.first ? 'active="true"' : '' }}>
            <span class="line-clamp-1">{{ tab_group_column.column_label }}</span>
          </tosoh-tab-group>
        {% endfor %}
      </div>
    </tosoh-scroll-x>
  </div>

  <div class="relative block w-full md:hidden md:max-w-[10rem]">
    <select
      class="p-sm focus:ring-imperial-red peer focus:ring-opacity-50 h-full w-full cursor-pointer appearance-none rounded-lg border border-slate-200 focus:ring-1 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"
      onchange="handleTabGroupChange(event)">
      {% for tab_group_column in tab_group_columns %}
        <option value="{{ tab_group_column.column_label }}">{{ tab_group_column.column_label }}</option>
      {% endfor %}
    </select>

    <div
      class="pointer-events-none absolute inset-y-0 right-3 flex items-center transition-transform duration-200 peer-open:rotate-180">
      <svg class="text-imperial-red h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M19 9l-7 7-7-7"></path>
      </svg>
    </div>
  </div>
{%- endmacro -%}

{% macro render_lock(locked_message) -%}
  <div
    class="p-sm md:p-base gap-sm absolute top-0 right-0 hidden h-full w-full items-center justify-center bg-black/60 group-[&[disabled]]:flex">
    <svg xmlns="http://www.w3.org/2000/svg" width="54" height="54" viewBox="0 0 54 54" fill="none">
      <foreignObject x="-2.16" y="-2.16" width="58.32" height="58.32">
        <div
          xmlns="http://www.w3.org/1999/xhtml"
          style="backdrop-filter:blur(1.08px);clip-path:url(#bgblur_0_96_2968_clip_path);height:100%;width:100%"></div>
      </foreignObject>
      <g data-figma-bg-blur-radius="2.16">
        <rect width="54" height="54" rx="27" fill="white" fill-opacity="0.14" />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M13.4326 26.2471C13.4326 25.0477 13.9091 23.8974 14.7572 23.0492C15.6054 22.2011 16.7557 21.7246 17.9551 21.7246H36.0451C37.2446 21.7246 38.3949 22.2011 39.243 23.0492C40.0911 23.8974 40.5676 25.0477 40.5676 26.2471V36.7996C40.5676 37.9991 40.0911 39.1494 39.243 39.9975C38.3949 40.8456 37.2446 41.3221 36.0451 41.3221H17.9551C16.7557 41.3221 15.6054 40.8456 14.7572 39.9975C13.9091 39.1494 13.4326 37.9991 13.4326 36.7996V26.2471ZM28.5076 29.2621C28.5076 28.8623 28.3488 28.4789 28.0661 28.1961C27.7834 27.9134 27.3999 27.7546 27.0001 27.7546C26.6003 27.7546 26.2169 27.9134 25.9342 28.1961C25.6514 28.4789 25.4926 28.8623 25.4926 29.2621V33.7846C25.4926 34.1844 25.6514 34.5679 25.9342 34.8506C26.2169 35.1333 26.6003 35.2921 27.0001 35.2921C27.3999 35.2921 27.7834 35.1333 28.0661 34.8506C28.3488 34.5679 28.5076 34.1844 28.5076 33.7846V29.2621Z"
          fill="white" />
        <path
          d="M20.9707 23.2312V18.7087C20.9707 17.1095 21.606 15.5757 22.7368 14.4449C23.8677 13.314 25.4014 12.6787 27.0007 12.6787C28.6 12.6787 30.1337 13.314 31.2646 14.4449C32.3954 15.5757 33.0307 17.1095 33.0307 18.7087V23.2312"
          stroke="white"
          stroke-width="3.015"
          stroke-linecap="round"
          stroke-linejoin="round" />
      </g>
      <defs>
        <clipPath id="bgblur_0_96_2968_clip_path" transform="translate(2.16 2.16)">
          <rect width="54" height="54" rx="27" />
        </clipPath>
      </defs>
    </svg>
    <span class="text-white">{{ locked_message }}</span>
  </div>
{%- endmacro -%}

{% macro render_download_document_icon(is_absolute) -%}
  {% set is_absolute = is_absolute ? 'top-base right-base absolute' : '' %}
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="23"
    height="23"
    viewBox="0 0 23 23"
    fill="none"
    class="{{ is_absolute }} h-6 w-6 min-w-[3rem]">
    <path
      d="M1.00006 16.5629V17.8701C1.00006 18.9144 1.4149 19.9159 2.15333 20.6544C2.89175 21.3928 3.89327 21.8076 4.93756 21.8076H18.0626C19.1069 21.8076 20.1084 21.3928 20.8468 20.6544C21.5852 19.9159 22.0001 18.9144 22.0001 17.8701V16.5576M11.5001 1.46387V15.9014M11.5001 15.9014L16.0938 11.3076M11.5001 15.9014L6.90631 11.3076"
      stroke="#231F20"
      stroke-width="1.96875"
      stroke-linecap="round"
      stroke-linejoin="round" />
  </svg>
{%- endmacro -%}

{% macro render_document_type(document_type) %}

  {% if document_type == 'PDF' %}
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="101"
      height="101"
      viewBox="0 0 101 101"
      fill="none"
      class="h-12 w-12 min-w-[3rem]">
      <rect width="100.941" height="100.941" rx="20.5304" fill="#E4032D" />
      <g clip-path="url(#clip0_931_164)">
        <path
          d="M33.931 47.163V45.5091H32.2772V47.163H33.931ZM47.1617 47.163V45.5091H45.5079V47.163H47.1617ZM47.1617 60.3937H45.5079V62.0475H47.1617V60.3937ZM70.3154 37.24H71.9693V36.5553L71.4864 36.069L70.3154 37.24ZM60.3924 27.3169L61.5633 26.146L61.0771 25.6631H60.3924V27.3169ZM33.931 48.8168H37.2387V45.5091H33.931V48.8168ZM35.5848 62.0475V53.7783H32.2772V62.0475H35.5848ZM35.5848 53.7783V47.163H32.2772V53.7783H35.5848ZM37.2387 52.1245H33.931V55.4322H37.2387V52.1245ZM38.8925 50.4707C38.8925 50.9093 38.7183 51.3299 38.4081 51.6401C38.098 51.9503 37.6773 52.1245 37.2387 52.1245V55.4322C38.5546 55.4322 39.8165 54.9095 40.747 53.979C41.6775 53.0485 42.2002 51.7865 42.2002 50.4707H38.8925ZM37.2387 48.8168C37.6773 48.8168 38.098 48.9911 38.4081 49.3012C38.7183 49.6114 38.8925 50.032 38.8925 50.4707H42.2002C42.2002 49.1548 41.6775 47.8928 40.747 46.9623C39.8165 46.0319 38.5546 45.5091 37.2387 45.5091V48.8168ZM45.5079 47.163V60.3937H48.8155V47.163H45.5079ZM47.1617 62.0475H50.4694V58.7399H47.1617V62.0475ZM55.4309 57.086V50.4707H52.1232V57.086H55.4309ZM50.4694 45.5091H47.1617V48.8168H50.4694V45.5091ZM55.4309 50.4707C55.4309 49.1548 54.9082 47.8928 53.9777 46.9623C53.0472 46.0319 51.7853 45.5091 50.4694 45.5091V48.8168C50.908 48.8168 51.3287 48.9911 51.6388 49.3012C51.949 49.6114 52.1232 50.032 52.1232 50.4707H55.4309ZM50.4694 62.0475C51.7853 62.0475 53.0472 61.5248 53.9777 60.5943C54.9082 59.6639 55.4309 58.4019 55.4309 57.086H52.1232C52.1232 57.5246 51.949 57.9453 51.6388 58.2555C51.3287 58.5656 50.908 58.7399 50.4694 58.7399V62.0475ZM58.7386 45.5091V62.0475H62.0462V45.5091H58.7386ZM60.3924 48.8168H68.6616V45.5091H60.3924V48.8168ZM60.3924 55.4322H65.3539V52.1245H60.3924V55.4322ZM32.2772 42.2015V30.6246H28.9695V42.2015H32.2772ZM68.6616 37.24V42.2015H71.9693V37.24H68.6616ZM33.931 28.9708H60.3924V25.6631H33.931V28.9708ZM59.2215 28.4878L69.1445 38.4109L71.4864 36.069L61.5633 26.146L59.2215 28.4878ZM32.2772 30.6246C32.2772 30.186 32.4514 29.7653 32.7616 29.4552C33.0717 29.145 33.4924 28.9708 33.931 28.9708V25.6631C32.6151 25.6631 31.3531 26.1858 30.4227 27.1163C29.4922 28.0467 28.9695 29.3087 28.9695 30.6246H32.2772ZM28.9695 65.3552V70.3167H32.2772V65.3552H28.9695ZM33.931 75.2782H67.0078V71.9706H33.931V75.2782ZM71.9693 70.3167V65.3552H68.6616V70.3167H71.9693ZM67.0078 75.2782C68.3236 75.2782 69.5856 74.7555 70.5161 73.825C71.4466 72.8946 71.9693 71.6326 71.9693 70.3167H68.6616C68.6616 70.7554 68.4874 71.176 68.1772 71.4862C67.8671 71.7963 67.4464 71.9706 67.0078 71.9706V75.2782ZM28.9695 70.3167C28.9695 71.6326 29.4922 72.8946 30.4227 73.825C31.3531 74.7555 32.6151 75.2782 33.931 75.2782V71.9706C33.4924 71.9706 33.0717 71.7963 32.7616 71.4862C32.4514 71.176 32.2772 70.7554 32.2772 70.3167H28.9695Z"
          fill="white" />
      </g>
      <defs>
        <clipPath id="clip0_931_164">
          <rect width="49.6152" height="49.6152" fill="white" transform="translate(25.6628 25.6631)" />
        </clipPath>
      </defs>
    </svg>
  {% else %}
    <span
      class="p-xs text-md bg-imperial-red flex aspect-square min-h-full items-center justify-center rounded-lg text-xs font-bold break-all text-white">
      <span class="text-center">{{ document_type }}</span>
    </span>
  {% endif %}
{% endmacro %}
