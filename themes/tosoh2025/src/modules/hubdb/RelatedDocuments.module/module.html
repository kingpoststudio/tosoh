{% set tab_group_columns = module.tab_group_columns %}
{% set lock_card = module.is_locked ? 'disabled' : '' %}
{% set is_locked = module.is_locked %}

{% require_js position="head" %}
  <script>
    function handleTabGroupChange(event) {
      const tabGroup = event.target.value;
      const tabGroupElement = document.querySelector(`tosoh-tab-group[groupId="${tabGroup}"]`);

      console.log(tabGroupElement);

      window.dispatchEvent(new CustomEvent('TosohTabGroupActive', { detail: { groupId: tabGroup }, bubbles: true }));
    }
  </script>
{% end_require_js %}

<div class="max-w-max-page p-md md:pl-2xl md:pr-2xl gap-base bg-ghost-white m-auto flex w-full flex-col">
  <div class="hidden w-full md:block">
    <tosoh-scroll-x>
      <div class="mb-xs min-w-9xl mx-auto flex w-full justify-center">
        {% for tab_group_column in tab_group_columns %}
          <tosoh-tab-group
            variant="action"
            groupId="{{ tab_group_column.column_label }}"
            {{ loop.first ? 'active="true"' : '' }}>
            {{ tab_group_column.column_label }}
          </tosoh-tab-group>
        {% endfor %}
      </div>
    </tosoh-scroll-x>
  </div>

  <div class="relative block w-full md:hidden md:max-w-[10rem]">
    <select class="custom-select" onchange="handleTabGroupChange(event)">
      {% for tab_group_column in tab_group_columns %}
        <option value="{{ tab_group_column.column_label }}">{{ tab_group_column.column_label }}</option>
      {% endfor %}
    </select>

    <div
      class="pointer-events-none absolute inset-y-0 right-3 flex items-center transition-transform duration-200 peer-open:rotate-180">
      <svg class="text-imperial-red h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M19 9l-7 7-7-7"></path>
      </svg>
    </div>
  </div>

  {% for tab_group_column in tab_group_columns %}
    <tosoh-tab-group
      variant="tab"
      groupId="{{ tab_group_column.column_label }}"
      {{ loop.first ? 'active="true"' : '' }}>
      <a
        href="{{ is_locked ? '/_hcms/mem/login' : '#' }}"
        target="_blank"
        {{ lock_card }}
        class="group p-sm md:p-base border-border gap-sm relative flex cursor-pointer flex-row items-center justify-between overflow-hidden rounded-2xl border transition-[shadow] duration-500 hover:shadow-sm">
        <div class="gap-sm flex flex-row items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="101"
            height="101"
            viewBox="0 0 101 101"
            fill="none"
            class="h-12 w-12 min-w-[3rem]">
            <rect width="100.941" height="100.941" rx="20.5304" fill="#E4032D" />
            <g clip-path="url(#clip0_931_164)">
              <path
                d="M33.931 47.163V45.5091H32.2772V47.163H33.931ZM47.1617 47.163V45.5091H45.5079V47.163H47.1617ZM47.1617 60.3937H45.5079V62.0475H47.1617V60.3937ZM70.3154 37.24H71.9693V36.5553L71.4864 36.069L70.3154 37.24ZM60.3924 27.3169L61.5633 26.146L61.0771 25.6631H60.3924V27.3169ZM33.931 48.8168H37.2387V45.5091H33.931V48.8168ZM35.5848 62.0475V53.7783H32.2772V62.0475H35.5848ZM35.5848 53.7783V47.163H32.2772V53.7783H35.5848ZM37.2387 52.1245H33.931V55.4322H37.2387V52.1245ZM38.8925 50.4707C38.8925 50.9093 38.7183 51.3299 38.4081 51.6401C38.098 51.9503 37.6773 52.1245 37.2387 52.1245V55.4322C38.5546 55.4322 39.8165 54.9095 40.747 53.979C41.6775 53.0485 42.2002 51.7865 42.2002 50.4707H38.8925ZM37.2387 48.8168C37.6773 48.8168 38.098 48.9911 38.4081 49.3012C38.7183 49.6114 38.8925 50.032 38.8925 50.4707H42.2002C42.2002 49.1548 41.6775 47.8928 40.747 46.9623C39.8165 46.0319 38.5546 45.5091 37.2387 45.5091V48.8168ZM45.5079 47.163V60.3937H48.8155V47.163H45.5079ZM47.1617 62.0475H50.4694V58.7399H47.1617V62.0475ZM55.4309 57.086V50.4707H52.1232V57.086H55.4309ZM50.4694 45.5091H47.1617V48.8168H50.4694V45.5091ZM55.4309 50.4707C55.4309 49.1548 54.9082 47.8928 53.9777 46.9623C53.0472 46.0319 51.7853 45.5091 50.4694 45.5091V48.8168C50.908 48.8168 51.3287 48.9911 51.6388 49.3012C51.949 49.6114 52.1232 50.032 52.1232 50.4707H55.4309ZM50.4694 62.0475C51.7853 62.0475 53.0472 61.5248 53.9777 60.5943C54.9082 59.6639 55.4309 58.4019 55.4309 57.086H52.1232C52.1232 57.5246 51.949 57.9453 51.6388 58.2555C51.3287 58.5656 50.908 58.7399 50.4694 58.7399V62.0475ZM58.7386 45.5091V62.0475H62.0462V45.5091H58.7386ZM60.3924 48.8168H68.6616V45.5091H60.3924V48.8168ZM60.3924 55.4322H65.3539V52.1245H60.3924V55.4322ZM32.2772 42.2015V30.6246H28.9695V42.2015H32.2772ZM68.6616 37.24V42.2015H71.9693V37.24H68.6616ZM33.931 28.9708H60.3924V25.6631H33.931V28.9708ZM59.2215 28.4878L69.1445 38.4109L71.4864 36.069L61.5633 26.146L59.2215 28.4878ZM32.2772 30.6246C32.2772 30.186 32.4514 29.7653 32.7616 29.4552C33.0717 29.145 33.4924 28.9708 33.931 28.9708V25.6631C32.6151 25.6631 31.3531 26.1858 30.4227 27.1163C29.4922 28.0467 28.9695 29.3087 28.9695 30.6246H32.2772ZM28.9695 65.3552V70.3167H32.2772V65.3552H28.9695ZM33.931 75.2782H67.0078V71.9706H33.931V75.2782ZM71.9693 70.3167V65.3552H68.6616V70.3167H71.9693ZM67.0078 75.2782C68.3236 75.2782 69.5856 74.7555 70.5161 73.825C71.4466 72.8946 71.9693 71.6326 71.9693 70.3167H68.6616C68.6616 70.7554 68.4874 71.176 68.1772 71.4862C67.8671 71.7963 67.4464 71.9706 67.0078 71.9706V75.2782ZM28.9695 70.3167C28.9695 71.6326 29.4922 72.8946 30.4227 73.825C31.3531 74.7555 32.6151 75.2782 33.931 75.2782V71.9706C33.4924 71.9706 33.0717 71.7963 32.7616 71.4862C32.4514 71.176 32.2772 70.7554 32.2772 70.3167H28.9695Z"
                fill="white" />
            </g>
            <defs>
              <clipPath id="clip0_931_164">
                <rect width="49.6152" height="49.6152" fill="white" transform="translate(25.6628 25.6631)" />
              </clipPath>
            </defs>
          </svg>
          <div class="gap-2xs flex flex-col">
            <h6
              class="text-default group-hover:text-imperial-red group-[&[disabled]]:text-nickel font-sans-narrow font-semibold transition-all duration-200">
              Getting Started with GR0121 but with lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam,
              quos.
            </h6>
            <span class="text-nickel gap-xs flex flex-row items-center text-sm">
              PDF Document
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="17"
                height="16"
                viewBox="0 0 17 16"
                fill="none"
                class="h-2 w-2">
                <circle cx="8.41171" cy="7.97079" r="7.64706" fill="#D9D9D9" />
              </svg>
              2.4 MB
            </span>
          </div>
        </div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="23"
          height="23"
          viewBox="0 0 23 23"
          fill="none"
          class="h-6 w-6 min-w-[3rem]">
          <path
            d="M1.00006 16.5629V17.8701C1.00006 18.9144 1.4149 19.9159 2.15333 20.6544C2.89175 21.3928 3.89327 21.8076 4.93756 21.8076H18.0626C19.1069 21.8076 20.1084 21.3928 20.8468 20.6544C21.5852 19.9159 22.0001 18.9144 22.0001 17.8701V16.5576M11.5001 1.46387V15.9014M11.5001 15.9014L16.0938 11.3076M11.5001 15.9014L6.90631 11.3076"
            stroke="#231F20"
            stroke-width="1.96875"
            stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>

        <div
          class="gap-sm absolute top-0 right-0 hidden h-full w-full items-center justify-center bg-black/60 group-[&[disabled]]:flex">
          <svg xmlns="http://www.w3.org/2000/svg" width="54" height="54" viewBox="0 0 54 54" fill="none">
            <foreignObject x="-2.16" y="-2.16" width="58.32" height="58.32">
              <div
                xmlns="http://www.w3.org/1999/xhtml"
                style="backdrop-filter:blur(1.08px);clip-path:url(#bgblur_0_96_2968_clip_path);height:100%;width:100%"></div>
            </foreignObject>
            <g data-figma-bg-blur-radius="2.16">
              <rect width="54" height="54" rx="27" fill="white" fill-opacity="0.14" />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M13.4326 26.2471C13.4326 25.0477 13.9091 23.8974 14.7572 23.0492C15.6054 22.2011 16.7557 21.7246 17.9551 21.7246H36.0451C37.2446 21.7246 38.3949 22.2011 39.243 23.0492C40.0911 23.8974 40.5676 25.0477 40.5676 26.2471V36.7996C40.5676 37.9991 40.0911 39.1494 39.243 39.9975C38.3949 40.8456 37.2446 41.3221 36.0451 41.3221H17.9551C16.7557 41.3221 15.6054 40.8456 14.7572 39.9975C13.9091 39.1494 13.4326 37.9991 13.4326 36.7996V26.2471ZM28.5076 29.2621C28.5076 28.8623 28.3488 28.4789 28.0661 28.1961C27.7834 27.9134 27.3999 27.7546 27.0001 27.7546C26.6003 27.7546 26.2169 27.9134 25.9342 28.1961C25.6514 28.4789 25.4926 28.8623 25.4926 29.2621V33.7846C25.4926 34.1844 25.6514 34.5679 25.9342 34.8506C26.2169 35.1333 26.6003 35.2921 27.0001 35.2921C27.3999 35.2921 27.7834 35.1333 28.0661 34.8506C28.3488 34.5679 28.5076 34.1844 28.5076 33.7846V29.2621Z"
                fill="white" />
              <path
                d="M20.9707 23.2312V18.7087C20.9707 17.1095 21.606 15.5757 22.7368 14.4449C23.8677 13.314 25.4014 12.6787 27.0007 12.6787C28.6 12.6787 30.1337 13.314 31.2646 14.4449C32.3954 15.5757 33.0307 17.1095 33.0307 18.7087V23.2312"
                stroke="white"
                stroke-width="3.015"
                stroke-linecap="round"
                stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="bgblur_0_96_2968_clip_path" transform="translate(2.16 2.16)">
                <rect width="54" height="54" rx="27" />
              </clipPath>
            </defs>
          </svg>
          <span class="text-white">{{ module.locked_message }}</span>
        </div>
      </a>
    </tosoh-tab-group>
  {% endfor %}
</div>
