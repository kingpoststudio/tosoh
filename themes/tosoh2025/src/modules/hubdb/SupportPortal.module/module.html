{% set filter_columns = module.filters|map('hubdb_column_id')|join(',') %}

{% set search_title = module.search.title %}
{% set search_hubdb_table = module.search.hubdb_table_id %}
{% set search_hubdb_column = module.search.hubdb_column_id %}

{% set row = dynamic_page_hubdb_row %}

{% require_js position="head" %}
<script>
const filters = '{{ filter_columns }}';
const search = {
    title: "{{ search_title  || ""}}",
    hubdb_table_id: "{{ search_hubdb_table || ""}}",
    hubdb_column_id: "{{ search_hubdb_column || ""}}",
};
window.Tosoh.SupportPortalContent = { filters, search };
</script>
{% end_require_js %}


{% if dynamic_page_hubdb_row %}
    {% set wistia_video_id = row.wistia_cached_url|split('/')|reverse|first %}

        {% require_js %}
        <script>
          window._wq = window._wq || [];
          _wq.push({
            id: "{{ wistia_video_id }}",
            options: {
              playerColor: "ed1a3b",
              backgroundOpacity: 1,
            }
          });
        </script>
        <script charset="ISO-8859-1" src="//fast.wistia.com/assets/external/E-v1.js" async></script>
        {% end_require_js %}
      
        <div class='p-base md:p-md mt-[6rem] mb-[6rem]'>
         <div class="w-full bg-ghost-white gap-xs p-md max-w-8xl rounded-lg mx-auto divide-x divide-x-raisin-black">
            <a class="whitespace-nowrap" href="/support-portal">Support Portal </a>
            <span class='break-all ml-2xs'>{{ row.name }}</span>
          </div>
          <div class="flex pt-md flex-col gap-md mx-auto max-w-8xl">
            <h1 class="text-xl font-bold break-all">{{ row.name }}</h1>
            <div class="w-full rounded-lg overflow-hidden aspect-video wistia_responsive_padding wistia_embed wistia_async_{{ wistia_video_id }}"></div>          
          </div>
        </div>
        </div>
{% else %}
<tosoh-support-portal></tosoh-support-portal>

{% endif %}
